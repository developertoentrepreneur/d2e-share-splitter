{% extends 'base.html' %}
{% load static %}

{% block title %}Users List{% endblock %}

{% block content %}
<div class="container">
  <h1>Users</h1>
  <div class="row">

    <div class="col-md-8">

      <table id="userTable" class="table table-striped">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Job Title</th>
          <th>Year Salary</th>
          <th colspan="3">Slices</th>
        </tr>
        {% for user in users %}
        <tr id="user-{{user.id}}">
          <td class="userName userData" name="name">{{user.name}}</td>
          <td class="userEmail userData" name="email">{{user.email}}</td>
          <td class="userJobTitle userData" name="jobTitle">{{user.jobTitle}}</td>
          <td class="userYearSalary userData" name="yearSalary">{{user.yearSalary}}</td>
          <td name="slices">{{user.slices}}</td>
          <td align="center">
            <button class="btn btn-success form-control" onClick="editUser({{user.id}})" data-toggle="modal"
              data-target="#myModal" )">
              <span class="glyphicon glyphicon-pencil"></span>
            </button>
          </td>
          <td align="center">
            <button class="btn btn-danger form-control" onClick="deleteUser({{user.id}})">
              <span class="glyphicon glyphicon-trash"></span>
            </button>
          </td>
        </tr>
        {% endfor %}
      </table>
      <button class="btn btn-primary form-control" data-toggle="modal" data-target="#myModal1" )">New User</button>
      <a href='{% url "shareusers:log_users" %}'>Check log</a>
    </div>
  </div>
</div>


<!-- Modal -->
<div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Create User</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">&times;</span></button>
      </div>
      <div class="modal-body">
        <form id="addUser" action="">
          <div class="form-group">
            <input class="form-control" type="text" name="name" placeholder="Name" required>
          </div>
          <div class="form-group">
            <input class="form-control" type="email" name="email" placeholder="Email" required>
          </div>
          <div class="form-group">
            <input class="form-control" type="text" name="jobTitle" placeholder="JobTitle" required>
          </div>
          <div class="form-group">
            <input class="form-control" type="number" name="yearSalary" placeholder="YearSalary" min=12000 max=200000
              required>
          </div>
          <button class="btn btn-primary form-control" type="submit">SUBMIT</button>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="myModalLabel">Update User</h4>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
            aria-hidden="true">&times;</span></button>

      </div>
      <form id="updateUser" action="">
        <div class="modal-body">
          <input class="form-control" id="form-id" type="hidden" name="formId" />
          <label for="name">Name</label>
          <input class="form-control" id="form-name" type="text" name="formName" />
          <label for="email">Email</label>
          <input class="form-control" id="form-email" type="email" name="formEmail" />
          <label for="jobTitle">JobTitle</label>
          <input class="form-control" id="form-jobTitle" type="text" name="formJobTitle" />
          <label for="yearSalary">YearSalary</label>
          <input class="form-control" id="form-yearSalary" type="number" name="formYearSalary" min=12000 max=200000 />
        </div>
        <div class="modal-footer">
          <button type="submit" class="btn btn-primary">Save changes</button>
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}



{% block javascript %}
<script type="text/javascript">
  var var_url_user_create = '{% url "shareusers:user_create" %}';
  var var_url_user_delete = '{% url "shareusers:user_delete" %}';
  var var_url_user_update = '{% url "shareusers:user_update" %}'
</script>
<script src="{% static 'js/shareusers/userslist.js' %}"></script>
{% endblock javascript %}